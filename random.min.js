function randomTextTransitionNested(e,t,n={}){if("string"==typeof e&&(e=document.querySelector(e)),!e)throw Error("Container element not found");let{chars:o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",interval:r=0,flicker:l=.1}=n,d=document.createElement("div"),i=document.createElement("div");function f(e,t=[]){for(let n of e.childNodes)n.nodeType===Node.TEXT_NODE?t.push(n):n.nodeType===Node.ELEMENT_NODE&&f(n,t);return t}d.innerHTML=t,i.innerHTML=t;let a=f(d);f(i);let h=a.map(e=>e.textContent||""),s=h.map(e=>Array.from(e,e=>/\s/.test(e)?e:o[Math.random()*o.length|0]));for(let c of(e.innerHTML="",i.childNodes))e.appendChild(c.cloneNode(!0));let m=[];h.forEach((e,t)=>{for(let n=0;n<e.length;n++)/\s/.test(e[n])||m.push([t,n])}),m.sort(()=>Math.random()-.5);let E=0,T=setInterval(()=>{if(E<m.length){let[t,n]=m[E++];s[t][n]=h[t][n]}for(let r=E;r<m.length;r++){let[d,i]=m[r];Math.random()<l&&(s[d][i]=o[Math.random()*o.length|0])}let a=f(e);a.forEach((e,t)=>{e.textContent=s[t].join("")}),E>=m.length&&(clearInterval(T),a.forEach((e,t)=>{e.textContent=h[t]}))},r)}